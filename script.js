// Translation Dictionary
const translations = {
    en: {
        nav: {
            difference: "Our Edge",
            benefits: "Benefits",
            products: "Products",
            partners: "Partner",
            contact: "Contact"
        },
        header: {
            whatsapp: "WhatsApp",
            call: "Call"
        },
        hero: {
            badge: "India's Most Advanced Formulation",
            title: "Pure Soil. Powerful Roots. Profitable Farming.",
            subtitle: "Premium-quality vermicompost enriched with scientifically selected botanical extracts and beneficial microbial consortia. Designed specifically for Indian soil conditions to maximize yield.",
            cta_partner: "Partner With Us",
            cta_products: "View Products"
        },
        diff: {
            title: "What Makes Satva Organics Different?",
            desc: "Unlike ordinary vermicompost, our formula is fortified with a powerful bio-active blend for superior results.",
            botanical: "Botanical Protectants",
            neem: "Neem Extract - Natural pest repellent",
            mustard: "Mustard Cake - Rich in nitrogen & phosphorus",
            castor: "Castor Cake - Improves soil structure & natural fungicide",
            microbial: "Beneficial Microbial Consortium",
            trichoderma: "Trichoderma spp. - Disease suppression",
            pseudomonas: "Pseudomonas fluorescens - Bacteria control",
            azotobacter: "Azotobacter - Nitrogen fixation",
            bacillus: "Bacillus firmus & polymyxa - Growth promotion",
            psb: "PSB - Phosphate Solubilizing Bacteria",
            booster: "Includes Immuno-Booster Microbial Blend for Stress Resistance"
        },
        benefits: {
            title: "5 Key Product Benefits",
        },
        ben: {
            soil: "Improves Soil Structure",
            soil_desc: "Enhances aeration, water retention, and microbial activity for long-term fertility.",
            root: "Enhances Root Development",
            root_desc: "Stimulates strong, deep root systems for better nutrient absorption.",
            nutrient: "Increases Nutrient Availability",
            nutrient_desc: "Nitrogen fixation and Phosphate solubilization ensure nutrients reach the plant.",
            immunity: "Boosts Plant Immunity",
            immunity_desc: "Botanical extracts help plants resist environmental stress and pathogens.",
            yield: "Improves Yield & Quality",
            yield_desc: "Better fruit size, color, uniformity, and overall crop performance."
        },
        ideal: {
            title: "Ideal For All Crops",
            apple: "Apple Orchards (HP & Kashmir)",
            veg: "Vegetables",
            flowers: "Floriculture",
            poly: "Polyhouse Crops",
            field: "Field Crops",
            organic: "Organic Farming"
        },
        products: {
            title: "Packaging Options"
        },
        prod: {
            "1kg": "1kg Pack",
            "1kg_desc": "Ideal for home pots and small plants.",
            "50kg": "50kg Bag",
            "50kg_desc": "Standard size for orchards and field application.",
            bulk: "Bulk Supply",
            bulk_desc: "For Institutional Buyers. Custom branding & export packaging available."
        },
        mission: {
            title: "Our Mission",
            text: "To create India’s most trusted organic soil enhancer by combining traditional vermicomposting with modern bio-microbial science.",
            sub: "We aim to empower farmers with:",
            p1: "Higher productivity",
            p2: "Lower chemical dependency",
            p3: "Improved soil health",
            p4: "Sustainable profitability"
        },
        trust: {
            title: "Why Farmers Trust Us?",
            consistent: "Consistent Quality",
            formula: "Scientifically Enriched Formula",
            visible: "Visible Results",
            value: "Suitable for High-Value Crops",
            soil: "Designed for Indian Soil Conditions",
            standards: "Quality Standards: Made from premium organic feedstock, Pathogen controlled, Lab-tested microbial enrichment."
        },
        partner: {
            title: "Partner With Us",
            subtitle: "We invite Progressive Farmers, HPMC Registered Growers, Distributors, and Export Buyers to experience the power of biologically enriched vermicompost."
        },
        form: {
            title: "Get in Touch",
            who: "I am a...",
            name: "Name",
            msg: "Message",
            btn: "Chat on WhatsApp",
            phone: "Phone Number",
            requirement: "Requirement",
            message: "Message",
            send_btn: "Send Message (WhatsApp)"
        },
        contact: {
            title: "Contact Us",
            subtitle: "We are based in Mohali and supply fresh organic vermicompost throughout Punjab and Himachal Pradesh.",
            reach_us: "Reach Us",
            response_promise: "We usually respond within 2 hours.",
            cta_whatsapp: "Chat on WhatsApp",
            call_now: "Call Now",
            address_label: "Address:",
            hours_label: "Hours:",
            form_title: "Send a Message"
        },
        opt: {
             farmer_bulk: "Farmer / Bulk Order",
             home_garden: "Home Garden",
             nursery_supply: "Nursery Supply",
             other: "Other"
        },
        placeholder: {
             name: "Enter your name",
             phone: "Enter phone number",
             message: "Enter your message"
        },
        footer: {
            tagline: "Where Soil Comes Alive.",
            links: "Quick Links",
            areas: "Service Areas",
            phone: "Phone:",
            contact: "Contact:",
            locations: "Himachal Pradesh, Punjab, Haryana, J&K, and Pan-India Supply.",
            rights: "All rights reserved."
        }
    },
    hi: {
        nav: {
            difference: "हमारी खासियत",
            benefits: "फायदे",
            products: "उत्पाद",
            partners: "पार्टनर बनें",
            contact: "संपर्क"
        },
        header: {
            whatsapp: "व्हाट्सप्प",
            call: "कॉल करें"
        },
        hero: {
            badge: "भारत का सबसे उन्नत फ़ॉर्मूला",
            title: "शुद्ध मिट्टी। मज़बूत जड़ें। मुनाफा खेती।",
            subtitle: "प्रीमियम वर्मीकम्पोस्ट जो वैज्ञानिक रूप से चयनित वनस्पति अर्क और लाभकारी रोगाणुओं से समृद्ध है। भारतीय मिट्टी की स्थिति के लिए विशेष डिज़ाइन।",
            cta_partner: "पार्टनर बनें",
            cta_products: "उत्पाद देखें"
        },
        diff: {
            title: "सत्व ऑर्गेनिक्स अलग क्यों है?",
            desc: "साधारण वर्मीकम्पोस्ट के विपरीत, हमारा फ़ॉर्मूला एक शक्तिशाली बायो-एक्टिव मिश्रण से समृद्ध है।",
            botanical: "वानस्पतिक सुरक्षा कवच",
            neem: "नीम अर्क - प्राकृतिक कीट नाशक",
            mustard: "सरसों खली - नाइट्रोजन और फास्फोरस से भरपूर",
            castor: "अरंडी खली - मिट्टी की संरचना में सुधार",
            microbial: "लाभकारी माइक्रोबियल कंसोर्टियम",
            trichoderma: "ट्राइकोडर्मा - रोग दमन",
            pseudomonas: "स्यूडोमोनास - बैक्टीरिया नियंत्रण",
            azotobacter: "एजोटोबैक्टर - नाइट्रोजन फिक्सेशन",
            bacillus: "बैसिलस - विकास संवर्धन",
            psb: "PSB - फास्फेट घोलक बैक्टीरिया",
            booster: "तनाव प्रतिरोध के लिए इम्यूनो-बूस्टर मिश्रण शामिल है"
        },
        benefits: {
            title: "5 प्रमुख फायदे",
        },
        ben: {
            soil: "मिट्टी की संरचना सुधारता है",
            soil_desc: "लंबे समय तक उर्वरता के लिए वातन, जल धारण और माइक्रोबियल गतिविधि बढ़ाता है।",
            root: "जड़ों का विकास बढ़ाता है",
            root_desc: "पोषक तत्वों के बेहतर अवशोषण के लिए मजबूत, गहरी जड़ों को उत्तेजित करता है।",
            nutrient: "पोषक तत्वों की उपलब्धता",
            nutrient_desc: "नाइट्रोजन और फास्फेट की उपलब्धता सुनिश्चित करता है ताकि पौधे फलें-फूलें।",
            immunity: "पौधों की प्रतिरक्षा बढ़ाता है",
            immunity_desc: "वानस्पतिक अर्क पौधों को पर्यावरणीय तनाव और बीमारियों से लड़ने में मदद करते हैं।",
            yield: "पैदावार और गुणवत्ता",
            yield_desc: "फलों का बेहतर आकार, रंग और एकसमानता सुनिश्चित करता है।"
        },
        ideal: {
            title: "सभी फसलों के लिए आदर्श",
            apple: "सेब के बाग (हिमाचल और कश्मीर)",
            veg: "सब्जियां",
            flowers: "फूलों की खेती",
            poly: "पॉलीहाउस फसलें",
            field: "खेती की फसलें",
            organic: "जैविक खेती"
        },
        products: {
            title: "पैकेजिंग विकल्प"
        },
        prod: {
            "1kg": "1 किलो पैक",
            "1kg_desc": "घर के गमलों और छोटे पौधों के लिए आदर्श।",
            "50kg": "50 किलो बैग",
            "50kg_desc": "बागानों और खेतों के लिए मानक आकार।",
            bulk: "थोक सप्लाई",
            bulk_desc: "संस्थागत खरीदारों के लिए। कस्टम ब्रांडिंग और निर्यात पैकेजिंग उपलब्ध।"
        },
        mission: {
            title: "हमारा मिशन",
            text: "पारंपरिक वर्मीकम्पोस्टिंग को आधुनिक जैव-विज्ञान के साथ जोड़कर भारत का सबसे भरोसेमंद जैविक मिट्टी वर्धक बनाना।",
            sub: "हम किसानों को सशक्त बनाना चाहते हैं:",
            p1: "उच्च उत्पादकता",
            p2: "रसायनों पर कम निर्भरता",
            p3: "बेहतर मिट्टी स्वास्थ्य",
            p4: "टिकाऊ मुनाफा"
        },
        trust: {
            title: "किसान हम पर भरोसा क्यों करते हैं?",
            consistent: "निरंतर गुणवत्ता",
            formula: "वैज्ञानिक रूप से समृद्ध फ़ॉर्मूला",
            visible: "दिखने वाले परिणाम",
            value: "उच्च मूल्य वाली फसलों के लिए उपयुक्त",
            soil: "भारतीय मिट्टी के लिए डिज़ाइन किया गया",
            standards: "गुणवत्ता मानक: प्रीमियम जैविक सामग्री, रोगजनक नियंत्रित, लैब-टेस्टेड।"
        },
        partner: {
            title: "हमारे साथ जुड़ें",
            subtitle: "हम प्रगतिशील किसानों, HPMC उत्पादकों, वितरकों और निर्यात खरीदारों को आमंत्रित करते हैं।"
        },
        form: {
            title: "संपर्क करें",
            who: "मैं एक...",
            name: "नाम",
            msg: "संदेश",
            btn: "व्हाट्सप्प पर चैट करें",
            phone: "फ़ोन नंबर",
            requirement: "ज़रूरत",
            message: "संदेश / स्थान",
            send_btn: "संदेश भेजें (व्हाट्सप्प)"
        },
        contact: {
            title: "संपर्क करें",
            subtitle: "हम मोहाली में स्थित हैं और पूरे पंजाब और हिमाचल प्रदेश में ताजा जैविक वर्मीकम्पोस्ट सप्लाई करते हैं।",
            reach_us: "हमसे जुड़ें",
            response_promise: "हम आमतौर पर 2 घंटे के भीतर जवाब देते हैं।",
            cta_whatsapp: "व्हाट्सप्प पर चैट करें",
            call_now: "अभी कॉल करें",
            address_label: "पता:",
            hours_label: "समय:",
            form_title: "संदेश भेजें"
        },
        opt: {
             farmer_bulk: "किसान / थोक ऑर्डर",
             home_garden: "होम गार्डन",
             nursery_supply: "नर्सरी सप्लाई",
             other: "अन्य"
        },
        placeholder: {
             name: "अपना नाम लिखें",
             phone: "फ़ोन नंबर लिखें",
             message: "अपना संदेश लिखें"
        },
        footer: {
            tagline: "जहाँ मिट्टी जीवंत हो उठती है।",
            links: "क्विक लिंक",
            areas: "सेवा क्षेत्र",
            phone: "फ़ोन:",
            contact: "संपर्क:",
            locations: "हिमाचल प्रदेश, पंजाब, हरियाणा, जम्मू-कश्मीर और अखिल भारतीय आपूर्ति।",
            rights: "सर्वाधिकार सुरक्षित।"
        }
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // State
    let currentLang = localStorage.getItem('satva_lang') || 'en';
    const WHATSAPP_NUMBER = "919340000099"; 

    // Elements
    const langToggleBtn = document.getElementById('lang-toggle');
    const mobileMenuToggle = document.querySelector('.mobile-nav-toggle');
    const navMenu = document.querySelector('.nav-menu');
    const partnerForm = document.getElementById('partner-form');
    // Add Back Contact Form Logic
    const contactForm = document.getElementById('main-contact-form');


    // Init
    updateContent(currentLang);

    // Event Listeners
    if(langToggleBtn) {
        langToggleBtn.addEventListener('click', () => {
            currentLang = currentLang === 'en' ? 'hi' : 'en';
            localStorage.setItem('satva_lang', currentLang);
            updateContent(currentLang);
        });
    }

    if(mobileMenuToggle) {
        mobileMenuToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            mobileMenuToggle.classList.toggle('active');
        });
    }

    // Close mobile menu when clicking a link
    document.querySelectorAll('.nav-menu a').forEach(link => {
        link.addEventListener('click', () => {
            navMenu.classList.remove('active');
            mobileMenuToggle.classList.remove('active');
        });
    });

    if(partnerForm) {
        partnerForm.addEventListener('submit', handlePartnerSubmit);
    }

    if(contactForm) {
        contactForm.addEventListener('submit', handleContactSubmit);
    }

    // Scroll Animations
    setupScrollReveal();

    // Functions
    function updateContent(lang) {
        // Update all elements with data-i18n
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            const value = getNestedTranslation(lang, key);
            if(value) {
                // Ensure bold tags inside specific lists are somewhat respected if we used innerHTML, 
                // but since we rely on textContent for safety, we accept plain text.
                el.textContent = value;
            }
        });

        // Update placeholders
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            const value = getNestedTranslation(lang, key);
            if(value) el.placeholder = value;
        });

        // Update Toggle Button Text
        if(langToggleBtn) {
            langToggleBtn.textContent = lang === 'en' ? 'EN | हिंदी' : 'हिंदी | EN';
        }
        
        document.documentElement.lang = lang;
    }

    function getNestedTranslation(lang, key) {
        return key.split('.').reduce((obj, k) => obj && obj[k], translations[lang]);
    }

    function handlePartnerSubmit(e) {
        e.preventDefault();
        const userType = document.getElementById('user-type').value;
        const name = document.getElementById('name').value;
        const message = document.getElementById('message').value;

        let text = `Hi Satva, I am a ${userType}. My name is ${name}. Message: ${message}`;
        if (currentLang === 'hi') {
             text = `नमस्ते सत्व, मैं एक ${userType} हूँ। मेरा नाम ${name} है। संदेश: ${message}`;
        }
        openWhatsApp(text);
    }

    function handleContactSubmit(e) {
        e.preventDefault();
        const name = document.getElementById('c-name').value;
        const phone = document.getElementById('c-phone').value;
        const requirement = document.getElementById('c-req').value;
        const message = document.getElementById('c-message').value;

        let text = `Hi Satva, Name: ${name}, Phone: ${phone}, Req: ${requirement}, Msg: ${message}`;
        if (currentLang === 'hi') {
             text = `नमस्ते सत्व, नाम: ${name}, फ़ोन: ${phone}, जरुरत: ${requirement}, संदेश: ${message}`;
        }
        openWhatsApp(text);
    }

    function openWhatsApp(text) {
        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(text)}`;
        window.open(url, '_blank');
    }

    function setupScrollReveal() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    }
});
